<!-- to make this a "bookmarklet":
  data:text/html, AllTheHTMLGoesHere
-->
<style>
  textarea {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    border: 0;
    padding: 10px;
    font-family: monospace;
    font-size: 1em;
    resize: none;
  }
  textarea:focus {
    outline: none;
  }
</style>
<body onload="pageLoad()">
<select id="files" multiple>
<option name="file1.txt">file1.txt</option>
<option name="script.js">script.js</option>
<option name="python_script.py">python_script.py</option>
<option name="ruby_script.rb">ruby_script.rb</option>
</select>
<textarea
  id="editor"
  autofocus
  onclick="textChange()"
  onchange="textChange()"
  onkeyup="textChange()"></textarea>
<script>
var editor = document.getElementById('editor')

function pageLoad() {
  var loaded = JSON.parse(localStorage.getItem('file1.txt'))

  if (!loaded) {
    editor.value = "Welcome to your lightweight, in-browser text editor.\nYour text is saved to your browser's localStorage and will be here when you return.";
    textChange()
    return;
  }

  editor.value = loaded['value'];
  editor.selectionStart = loaded['selectionStart'];
  editor.selectionEnd = loaded['selectionEnd'];
}

function textChange() {
  localStorage.setItem(
    'file1.txt',
    JSON.stringify({
      value: editor.value,
      selectionStart: editor.selectionStart,
      selectionEnd: editor.selectionEnd,
    })
  );
}
</script>
</body>
